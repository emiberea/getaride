{% extends '::base.html.twig' %}

{% block content -%}
    <div class="row">
        <div class="col-md-8">
            <ul class="nav nav-tabs nav-justified">
                {% set route = app.request.attributes.get('_route') %}
                <li class="{{ route == 'ride' ? 'active' }}">
                    <a href="{{ path('ride') }}">My Rides</a>
                </li>
                <li class="{{ route == 'ride_search' or route == 'ride_search_results' ? 'active' }}">
                    <a href="{{ path('ride_search') }}">Search Rides</a>
                </li>
                <li class="{{ route == 'ride_attempted' ? 'active' }}">
                    <a href="{{ path('ride_attempted') }}">Join Requested Rides</a>
                </li>
            </ul>

            <h1>Ride - show attempted</h1>
            <h4>Rides attempted by <a href="{{ path('eb_user_public_profile', {'username': app.user.username}) }}">{{ app.user.username }} (me)</a></h4>

            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Offered By</th>
                        <th>Id</th>
                        <th>Start Date</th>
                        <th>Start Location</th>
                        <th>Stop Location</th>
                        <th>Empty Seats No</th>
                        <th>Baggage Per Seat</th>
                        <th>Comment</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for rideRequest in pagination %}
                        <tr>
                            <td>{{ rideRequest.ride.user.username }}</td>
                            <td><a href="{{ path('ride_show', { 'id': rideRequest.ride.id }) }}">{{ rideRequest.ride.id }}</a></td>
                            <td>{% if rideRequest.ride.startDate %}{{ rideRequest.ride.startDate|date('Y-m-d H:i:s') }}{% endif %}</td>
                            <td>{{ rideRequest.ride.startLocation }}</td>
                            <td>{{ rideRequest.ride.stopLocation }}</td>
                            <td>{{ rideRequest.ride.emptySeatsNo }}</td>
                            <td>{{ rideRequest.ride.baggagePerSeat }}</td>
                            <td>{{ rideRequest.ride.comment }}</td>
                            <td>{{ rideRequest.status.name }}</td>
                            <td>
                                <a href="{{ path('ride_show_public', { 'id': rideRequest.ride.id }) }}">show_public</a>
                                <a href="{{ path('ride_request_chat', { 'id': rideRequest.id }) }}">chat</a>
                            </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="9">You have no rides which you attempted to join.</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>

            <div class="navigation">
                {{ knp_pagination_render(pagination) }}
            </div>

            <a href="{{ path('ride') }}">
                Back to the list
            </a>
        </div>
        <div class="col-md-4"></div>
    </div>
{% endblock %}
